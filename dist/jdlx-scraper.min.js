!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("jdlx-scraper",[],r):"object"==typeof exports?exports["jdlx-scraper"]=r():e["jdlx-scraper"]=r()}(this,function(){return function(e){function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}var t={};return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="",r(r.s=0)}([function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var a=t(1),i=n(a),o=t(3),u=n(o),s=t(4),c=n(s),f=new i.default;f.registerParser("toText",u.default.toText),f.registerParser("toNumber",u.default.toNumber),f.registerParser("toCurrency",u.default.toCurrency),f.registerParser("trim",u.default.trim),f.registerParser("match",u.default.match),f.registerParser("toAbsolute",u.default.toAbsolute),f.registerExtractor("json",c.default),r.default=f},function(e,r,t){"use strict";function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),i=t(2),o=function(e){return e&&e.__esModule?e:{default:e}}(i),u=function(){function e(){n(this,e),this.parsers={},this.extractors={}}return a(e,[{key:"registerParser",value:function(e,r,t){if(t=t||!1,this.parsers[e]&&!t)throw"Parser "+e+" already exists";this.parsers[e]=r}},{key:"registerExtractor",value:function(e,r,t){if(t=t||!1,this.extractors[e]&&!t)throw"Extractor "+e+" already exists";this.extractors[e]=r}},{key:"scrape",value:function(e,r,t,n){return this.create(e,r).scrape(t,n)}},{key:"create",value:function(e,r){if(!e)throw"Definition is not provided!";if(!this.extractors[r])throw"Extractor "+name+" doesn't exists or is not registered";return new o.default(e,this.parsers,this.extractors[r])}}]),e}();r.default=u},function(e,r,t){"use strict";function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),i=function(){function e(r,t,a){n(this,e),this.definition=r,this.parsers=t,this.extractor=a}return a(e,[{key:"scrape",value:function(e,r){return r=r||{},this.parseNode(e,this.definition,r)}},{key:"parseNode",value:function(e,r,t){return Array.isArray(r)||(r=[r]),0===r.length?[]:r[0].$each?this.parseCollection(e,r[0],t):r[0].$q?this.parseField(e,r,t):this.parseMembers(e,r[0],t)}},{key:"parseMembers",value:function(e,r){var t={};for(var n in r)t[n]=this.parseNode(e,r[n]);return t}},{key:"parseCollection",value:function(e,r){var t=this,n=Object.assign({},r),a=[],i=n.$each;return delete n.$each,Array.isArray(i)||(i=[i]),this.extractor(e,i).forEach(function(e){a.push(t.parseNode(e,n))},this),a}},{key:"parseField",value:function(e,r){for(var t=null,n=0;n<r.length;n++){var a=r[n];if(!a)return"";if(a.$val)return a.$val;t=e,a.$q&&(t=this.extractor(e,a.$q)),a.$m&&(t=this.runMacros(t,a.$m));break}return t}},{key:"runMacros",value:function(e,r){return Array.isArray(r)||(r=[r]),r.forEach(function(r){if("string"==typeof r)e=this.parsers[r](e);else for(var t in r)e=this.parsers[t](e,r[t])},this),e}}]),e}();r.default=i,r.Runner=i},function(e,r,t){"use strict";function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),i=function(){function e(){n(this,e)}return a(e,null,[{key:"trim",value:function(e){var r=e;return r=r.replace(/\t|\n/g,""),r=r.replace(/[ ]{2,}/g," "),r.trim()}},{key:"toAbsolute",value:function(e,r){if(0===r.indexOf("http"))return r;var t=e.match(/^https?/)[0],n=e.match(/^(https?:\/\/[\S]*)\//)[0],a=e.match(/^(https?:\/\/[\S]*?)\//)[1];return 0===r.indexOf("data")?r:0===r.indexOf("//")?t+":"+r:0===r.indexOf("/")?a+r:n+r}},{key:"toCurrency",value:function(e){var r=e.match(/[0-9,]+[. ]?[0-9]*/),t=r[0].trim().replace(" ",".").replace(",","");return{symbol:e.replace(r[0],"").trim(),ammount:t}}},{key:"toText",value:function(e){return String(e)}},{key:"toNumber",value:function(e){return Number(e)}},{key:"match",value:function(e,r){var t=r.regexp,n=r.group||0,a=e.match(t);return a&&a[n]?a[n]:"0"}}]),e}();r.default=i},function(e,r,t){"use strict";function n(e,r){return r&&!Array.isArray(r)&&(r=r.split(".")),0===r.length?e:n(e[r.shift()],r)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n}])});